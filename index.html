<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>VEO3 Prompt Generator</title>
  <link rel="manifest" href="manifest.json">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js')
        .then(() => console.log("‚úÖ Service Worker terdaftar!"))
        .catch(err => console.error("‚ùå Gagal daftar SW:", err));
    }
  </script>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f0f4f8; }
    .scene { background: white; padding: 15px; margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    label { font-weight: bold; display: block; margin-top: 10px; }
    input, textarea, select { width: 100%; padding: 8px; margin-top: 5px; border-radius: 4px; border: 1px solid #ccc; }
    button { padding: 10px 15px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 10px; }
    #output { background: #eaeaea; padding: 15px; white-space: pre-wrap; margin-top: 20px; border-radius: 5px; }
  </style>
</head>
<body>
  <h2>üé¨ VEO3 Prompt Generator (PWA)</h2>

  <label>Pilih Template:</label>
  <select id="template" onchange="loadTemplate()">
    <option value="">-- Pilih --</option>
    <option value="makaroni">Gerobak Makaroni</option>
    <option value="kerupuk">Kerupuk Kulit</option>
  </select>

  <div id="scenes"></div>

  <button onclick="addScene()">‚ûï Tambah Scene</button>
  <button onclick="generatePrompt()">üìã Buat Prompt</button>
  <button onclick="copyPrompt()">üìÑ Salin</button>
  <button onclick="downloadPrompt()">‚¨áÔ∏è Unduh</button>

  <h3>üìã Hasil Prompt:</h3>
  <pre id="output"></pre>

  <script>
    let sceneCount = 0;

    function addScene() {
        sceneCount++;
        const container = document.createElement('div');
        container.className = 'scene';
        container.innerHTML = `
          <h4>Scene ${sceneCount}</h4>
          <label>Deskripsi Adegan</label>
          <textarea class="scene-desc"></textarea>

          <label>Karakter</label>
          <textarea class="scene-char"></textarea>

          <label>Voice-over / Dialog</label>
          <textarea class="scene-voice"></textarea>

          <label>Gaya Video</label>
          <select class="scene-style">
            <option value="ceria">Ceria</option>
            <option value="sinematik">Sinematik</option>
            <option value="kekinian">Kekinian</option>
          </select>

          <label>Gaya Kamera</label>
          <input class="scene-camera" type="text" placeholder="Contoh: Medium Shot">

          <label>Musik/SFX</label>
          <input class="scene-music" type="text" placeholder="Contoh: Musik ceria">

          <label>Durasi (detik)</label>
          <input type="number" class="scene-duration" value="10">
      `;
      document.getElementById('scenes').appendChild(container);
    }

    function generatePrompt() {
      const scenes = document.querySelectorAll('.scene');
      let prompt = '';
      scenes.forEach((scene, index) => {
        const desc = scene.querySelector('.scene-desc').value;
        const char = scene.querySelector('.scene-char').value;
        const voice = scene.querySelector('.scene-voice').value;
        const style = scene.querySelector('.scene-style').value;
        const cam = scene.querySelector('.scene-camera').value;
        const music = scene.querySelector('.scene-music').value;
        const dur = scene.querySelector('.scene-duration').value;
        prompt += 
`Scene ${index + 1}:
1. Scene: ${desc}
2. Character(s): ${char}
3. Dialogue/Voiceover: ${voice}
4. Style: ${style}
5. Camera: ${cam}
6. Music/SFX: ${music}
7. Duration: ${dur} seconds

`;
      });
      document.getElementById('output').textContent = prompt;
    }

    function copyPrompt() {
      const output = document.getElementById('output').textContent;
      navigator.clipboard.writeText(output);
      alert("Prompt berhasil disalin!");
    }

    function downloadPrompt() {
      const output = document.getElementById('output').textContent;
      const blob = new Blob([output], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "veo3_prompt.txt";
      a.click();
      URL.revokeObjectURL(url);
    }

    function loadTemplate() {
      const template = document.getElementById("template").value;
      if (template === "makaroni") {
        addScene({
          scene: "Pembeli muda datang ke gerobak coklat hangat di sore hari.",
          character: "Penjual: wanita muda berhijab cerah, Pembeli: gadis muda berhijab putih.",
          voice: "Yuk cobain makaroni basah dan kering pedasnya! Dijamin ketagihan!",
          camera: "Medium shot, close-up makaroni",
          music: "Musik ceria khas street food",
          duration: 10
        });
      } else if (template === "kerupuk") {
        addScene({
          scene: "Proses penjemuran kerupuk kulit oleh ibu-ibu di halaman rumah.",
          character: "Ibu paruh baya, mengenakan daster batik.",
          voice: "Inilah kerupuk kulit asli, dijemur alami dan digoreng renyah!",
          camera: "Wide shot lalu zoom in ke kerupuk",
          music: "Musik lembut tradisional",
          duration: 10
        });
      }
    }
  </script>
</body>
</html>